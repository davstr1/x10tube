extends layout

block structuredData
  script(type="application/ld+json").
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Is it free?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes. No account needed."
          }
        },
        {
          "@type": "Question",
          "name": "Is my data private?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Conversations happen in your own assistant. You're identified by a random code, no email, no signup. Delete your pages anytime."
          }
        },
        {
          "@type": "Question",
          "name": "Can I sync between devices?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "There's no sync feature, but your content is tied to a user code. Enter it on another device to access your pages."
          }
        }
      ]
    }

block content
  //- Hero
  section.mb-6.text-center
    h1.text-xl.md_text-2xl.font-semibold.text-text-primary.mb-2
      | One click → To your AI. Any content.

    p.text-sm.text-text-secondary.mb-6
      | YouTube, articles, docs. Extract and send to Claude, ChatGPT, or any assistant you already use. One source or dozens.

  //- Slideshow
  section(style="margin-top: 2rem; margin-bottom: 2rem; margin-left: calc(-50vw + 50%); margin-right: calc(-50vw + 50%); padding: 0 calc(50vw - 400px); max-width: 100vw;")
    .relative.overflow-hidden.rounded-xl.border.border-border-default.bg-surface(style="aspect-ratio: 16/9; cursor: zoom-in;")
      -
        var slideAlts = ['StraightToYourAI extension popup on a web page', 'Sending a YouTube video to Claude AI', 'Collection of extracted content ready to share', 'Choosing your AI assistant to send content to', 'Multiple sources combined into one markdown page']
      each i in [1, 2, 3, 4, 5]
        img(src=`/slides/slide${i}.png` alt=slideAlts[i-1] loading=(i > 1 ? 'lazy' : undefined) style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity 0.5s ease;" data-slide=i)
      //- Navigation dots
      .flex.justify-center.gap-2(style="position:absolute;bottom:12px;left:0;right:0;")
        each i in [1, 2, 3, 4, 5]
          button.rounded-full(style="width:8px;height:8px;background:rgba(255,255,255,0.3);border:none;padding:0;cursor:pointer;transition:background 0.3s;" data-dot=i)
      //- Arrow buttons
      button.stya-slide-arrow(style="position:absolute;left:8px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.4);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;" data-dir="prev")
        | ‹
      button.stya-slide-arrow(style="position:absolute;right:8px;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.4);border:none;color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;" data-dir="next")
        | ›
    //- Lightbox overlay
    #slide-lightbox(style="display:none; position:fixed; inset:0; z-index:200; background:rgba(0,0,0,0.92); cursor:zoom-out; opacity:0; transition:opacity 0.2s ease;")
      button#lightbox-close(style="position:absolute; top:16px; right:16px; z-index:210; background:none; border:none; color:rgba(255,255,255,0.7); font-size:28px; cursor:pointer; width:40px; height:40px; display:flex; align-items:center; justify-content:center;") ×
      img#lightbox-img(style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); max-width:90vw; max-height:90vh; object-fit:contain; cursor:default;")
      button#lightbox-prev(style="position:absolute; left:16px; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.4); border:none; color:#fff; width:40px; height:40px; border-radius:50%; cursor:pointer; font-size:20px; display:flex; align-items:center; justify-content:center;") ‹
      button#lightbox-next(style="position:absolute; right:16px; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.4); border:none; color:#fff; width:40px; height:40px; border-radius:50%; cursor:pointer; font-size:20px; display:flex; align-items:center; justify-content:center;") ›
      .flex.justify-center.gap-2(style="position:absolute; bottom:24px; left:0; right:0;")
        each i in [1, 2, 3, 4, 5]
          button.rounded-full(style="width:8px; height:8px; background:rgba(255,255,255,0.3); border:none; padding:0; cursor:pointer; transition:background 0.3s;" data-lbdot=i)
    script.
      (function() {
        var current = 1, total = 5, timer = null;
        var isPaused = false;
        var lightboxOpen = false;
        var slides = document.querySelectorAll('[data-slide]');
        var dots = document.querySelectorAll('[data-dot]');
        var container = document.querySelector('[data-slide]').parentElement;
        var lightbox = document.getElementById('slide-lightbox');
        var lightboxImg = document.getElementById('lightbox-img');
        var lbDots = document.querySelectorAll('[data-lbdot]');

        function show(n) {
          current = n < 1 ? total : n > total ? 1 : n;
          slides.forEach(function(s) { s.style.opacity = s.dataset.slide == current ? '1' : '0'; });
          dots.forEach(function(d) { d.style.background = d.dataset.dot == current ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.3)'; });
          if (lightboxOpen) {
            lightboxImg.src = '/slides/slide' + current + '.png';
            lbDots.forEach(function(d) { d.style.background = d.dataset.lbdot == current ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.3)'; });
          }
        }
        function start() {
          if (timer !== null) return;
          timer = setInterval(function() { show(current + 1); }, 7000);
        }
        function stop() { clearInterval(timer); timer = null; }
        function restart() {
          stop();
          if (!isPaused) start();
        }
        show(1);
        start();

        // Hover pause — ignored while lightbox is open
        container.addEventListener('mouseenter', function() {
          if (lightboxOpen) return;
          isPaused = true; stop();
        });
        container.addEventListener('mouseleave', function() {
          if (lightboxOpen) return;
          isPaused = false; start();
        });

        // Slideshow arrows & dots
        document.querySelectorAll('.stya-slide-arrow').forEach(function(btn) {
          btn.addEventListener('click', function() { show(current + (btn.dataset.dir === 'next' ? 1 : -1)); restart(); });
        });
        dots.forEach(function(d) {
          d.addEventListener('click', function() { show(parseInt(d.dataset.dot)); restart(); });
        });

        // Lightbox: open
        container.addEventListener('click', function(e) {
          if (e.target.closest('.stya-slide-arrow') || e.target.closest('[data-dot]')) return;
          lightboxOpen = true;
          isPaused = true;
          stop();
          lightboxImg.src = '/slides/slide' + current + '.png';
          lbDots.forEach(function(d) { d.style.background = d.dataset.lbdot == current ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.3)'; });
          document.body.style.overflow = 'hidden';
          lightbox.style.display = '';
          requestAnimationFrame(function() {
            requestAnimationFrame(function() { lightbox.style.opacity = '1'; });
          });
        });

        // Lightbox: close
        function closeLightbox() {
          lightbox.style.opacity = '0';
          lightboxOpen = false;
          document.body.style.overflow = '';
          lightbox.addEventListener('transitionend', function onEnd() {
            lightbox.removeEventListener('transitionend', onEnd);
            lightbox.style.display = 'none';
            // Overlay gone — now check real hover state
            if (container.matches(':hover')) {
              isPaused = true;
            } else {
              isPaused = false;
              start();
            }
          });
        }
        document.getElementById('lightbox-close').addEventListener('click', closeLightbox);
        lightbox.addEventListener('click', function(e) {
          if (e.target === lightbox) closeLightbox();
        });

        // Lightbox: navigation (arrows + dots)
        document.getElementById('lightbox-prev').addEventListener('click', function() { show(current - 1); });
        document.getElementById('lightbox-next').addEventListener('click', function() { show(current + 1); });
        lbDots.forEach(function(d) {
          d.addEventListener('click', function() { show(parseInt(d.dataset.lbdot)); });
        });

        // Keyboard (only when lightbox open)
        document.addEventListener('keydown', function(e) {
          if (!lightboxOpen) return;
          if (e.key === 'Escape') closeLightbox();
          else if (e.key === 'ArrowLeft') show(current - 1);
          else if (e.key === 'ArrowRight') show(current + 1);
        });
      })();

  //- Chrome Extension CTA
  section.text-center(style="margin-top: 3rem; margin-bottom: 3rem;")
    a.inline-flex.items-center.gap-3.bg-surface.hover_bg-surface-hover.border.border-border-strong.hover_border-red-600.rounded-lg.px-6.py-4.transition-colors(href=chromeExtensionUrl target="_blank" rel="noopener noreferrer")
      img(src="https://www.google.com/chrome/static/images/chrome-logo-m100.svg" alt="Chrome" style="width: 32px; height: 32px;")
      .text-left
        .text-text-primary.font-medium Add to Chrome
        .text-text-muted.text-xs Free · No account needed

  //- Works with / Send to
  section.mb-10.text-center
    .inline-flex.flex-col.gap-2.text-sm
      //- Works with
      .flex.items-center.gap-2
        span.text-text-muted.w-20.text-right Works with
        .flex.items-center.gap-4
          .flex.items-center
            img(src="https://www.youtube.com/favicon.ico" alt="YouTube" style="width: 16px; height: 16px; margin-right: 6px;")
            span.text-text-secondary YouTube
          .flex.items-center
            svg.text-text-secondary(xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;")
              circle(cx="12" cy="12" r="10")
              line(x1="2" y1="12" x2="22" y2="12")
              path(d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z")
            span.text-text-secondary Any web page

      //- Send to
      .flex.items-center.gap-2
        span.text-text-muted.w-20.text-right Send to
        .flex.items-center.gap-2
          img(src="https://www.google.com/s2/favicons?domain=claude.ai&sz=32" alt="Claude" title="Claude" style="width: 18px; height: 18px;")
          img(src="https://cdn.oaistatic.com/assets/favicon-miwirzcw.ico" alt="ChatGPT" title="ChatGPT" style="width: 18px; height: 18px;")
          img(src="https://www.google.com/s2/favicons?domain=gemini.google.com&sz=32" alt="Gemini" title="Gemini" style="width: 18px; height: 18px;")
          img(src="https://www.google.com/s2/favicons?domain=perplexity.ai&sz=32" alt="Perplexity" title="Perplexity" style="width: 18px; height: 18px;")
          img(src="https://www.google.com/s2/favicons?domain=grok.com&sz=32" alt="Grok" title="Grok" style="width: 18px; height: 18px;")
          span.text-text-muted.ml-1 or any assistant

  //- Why
  section.py-6.border-t.border-border-default
    .space-y-3.text-sm.text-text-secondary.mb-6
      p.font-medium.text-text-primary
        | Summarizing and discussing web content with your AI
        br
        | should be a one-click operation.
      p
        | You're watching a video, reading an article. You want your assistant's take on it.
        br
        | Not some other chat. #[em Yours.] The one that knows your style, your projects, your context.
      p No workspace. No wizard. No "pro" tier.

  //- Comparison table (as separate section)
  section.py-6.border-t.border-border-default
    .overflow-x-auto
      table.w-full.text-sm
        thead
          tr.border-b.border-border-default
            th.py-3.pr-4.text-left.font-normal.text-text-muted
            th.py-3.pr-4.text-left.font-normal.text-text-muted Other tools
            th.py-3.text-left.font-normal
              .flex.items-center.gap-1
                svg(viewBox="0 0 100 100" style="width: 14px; height: 14px;")
                  path(d="M35 50 L72 29 A37 37 0 1 0 72 71 Z" fill="#dc2626")
                  circle(cx="65" cy="50" r="6" fill="#ffffff")
                  circle(cx="82" cy="50" r="6" fill="#ffffff")
                span
                  span.text-text-primary StraightToYour
                  span.text-red-600 AI
        tbody(style="vertical-align: top")
          tr.border-b.border-border-default
            td.py-3.pr-4.text-text-muted(style="vertical-align: top") Chat
            td.py-3.pr-4.text-text-secondary(style="vertical-align: top") Some chat I didn't ask for
            td.py-3.text-text-secondary(style="vertical-align: top")
              | My favorite assistant
              br
              span.text-text-muted Claude, GPT, Gemini…
          tr.border-b.border-border-default
            td.py-3.pr-4.text-text-muted(style="vertical-align: top") Limits
            td.py-3.pr-4.text-text-secondary(style="vertical-align: top") x requests / day
            td.py-3.text-text-secondary(style="vertical-align: top") ∞
          tr.border-b.border-border-default
            td.py-3.pr-4.text-text-muted(style="vertical-align: top") Account
            td.py-3.pr-4.text-text-secondary(style="vertical-align: top") Email, plan, workspace
            td.py-3.text-text-secondary(style="vertical-align: top")
              | No login, no account required
              br
              span.text-text-muted (anonymous code for cross-device sync)
          tr.border-b.border-border-default
            td.py-3.pr-4.text-text-muted(style="vertical-align: top") Sources
            td.py-3.pr-4.text-text-secondary(style="vertical-align: top") One at a time
            td.py-3.text-text-secondary(style="vertical-align: top") One or dozens
          tr.border-b.border-border-default
            td.py-3.pr-4.text-text-muted(style="vertical-align: top") Output
            td.py-3.pr-4.text-text-secondary(style="vertical-align: top; font-style: italic;") It's complicated…
            td.py-3.text-text-secondary(style="vertical-align: top") Clean, shareable markdown
          tr
            td.py-3.pr-4.text-text-muted(style="vertical-align: top") Pricing
            td.py-3.pr-4.text-text-secondary(style="vertical-align: top") Free / Pro / Ultra / …
            td.py-3.text-text-primary.font-medium(style="vertical-align: top") Free

  //- Use cases
  section.py-6.border-t.border-border-default
    h2.text-base.font-medium.mb-3 What you can do

    p.text-sm.text-text-secondary.mb-2 Whatever you usually do with your assistant.
    ul.text-sm.text-text-secondary.space-y-1
      li Drop 5 laptop reviews, ask "which one for video editing?"
      li 6 podcasts, 8 hours: key points in one click
      li 12 articles and 4 videos on a topic, one page, ready to learn

    p.text-sm.mt-4
      a.inline-flex.items-center.gap-1.text-text-secondary.underline(href=chromeExtensionUrl target="_blank" rel="noopener noreferrer")
        svg(viewBox="0 0 100 100" style="width: 14px; height: 14px;")
          path(d="M35 50 L72 29 A37 37 0 1 0 72 71 Z" fill="#dc2626")
          circle(cx="65" cy="50" r="6" fill="#ffffff")
          circle(cx="82" cy="50" r="6" fill="#ffffff")
        span Add to Chrome and find out.

  //- How it works
  section.py-6.border-t.border-border-default
    h2.text-base.font-medium.mb-3 How it works

    p.text-sm.text-text-secondary.mb-2 Extracts content, combines it into one markdown page, and gives your AI the link to fetch it. With customizable instructions.
    p.text-sm.text-text-muted That's it. A glorified concatenator.

  //- FAQ
  section.py-6.border-t.border-border-default
    h2.text-base.font-medium.mb-3 FAQ

    .space-y-3.text-sm
      div
        p.text-text-primary Is it free?
        p.text-text-muted Yes. No account needed.

      div
        p.text-text-primary Is my data private?
        p.text-text-muted Conversations happen in your own assistant. You're identified by a random code, no email, no signup. Delete your pages anytime.

      div
        p.text-text-primary Can I sync between devices?
        p.text-text-muted There's no sync feature, but your content is tied to a user code. Enter it on another device to access your pages.

      div
        p.text-text-primary Questions / Feedback?
        p.text-text-muted Drop me a line at #[a(href="mailto:toyourai@plstry.me" target="_blank" rel="noopener noreferrer") toyourai@plstry.me]

  if posthogApiKey
    script.
      (function() {
        var PH_KEY = '#{posthogApiKey}';
        var PH_URL = 'https://app.posthog.com/capture/';
        var vid = localStorage.getItem('stya_visitor_id');
        if (!vid) { vid = crypto.randomUUID(); localStorage.setItem('stya_visitor_id', vid); }

        function ph(event, props) {
          try {
            fetch(PH_URL, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ api_key: PH_KEY, event: event, distinct_id: vid, properties: props || {} })
            }).catch(function() {});
          } catch(e) {}
        }

        // landing_page_view
        var params = new URLSearchParams(location.search);
        ph('landing_page_view', {
          referrer: document.referrer || '',
          utm_source: params.get('utm_source') || '',
          utm_medium: params.get('utm_medium') || '',
          utm_campaign: params.get('utm_campaign') || ''
        });

        // click_install_chrome
        document.querySelectorAll('a[href*="chromewebstore"]').forEach(function(link) {
          link.addEventListener('click', function() { ph('click_install_chrome', {}); });
        });
      })();
