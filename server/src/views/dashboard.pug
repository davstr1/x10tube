extends layout

block content
  .flex.justify-between.items-center.mb-8
    h1.text-2xl.font-semibold.text-gray-900 My x10s
    a.bg-red-600.hover_bg-red-700.text-white.px-4.py-2.rounded-md.text-sm.font-medium.no-underline(href="/") + New

  if x10s && x10s.length > 0
    .space-y-4
      each x10 in x10s
        - const tokenDisplay = x10.tokenCount > 1000 ? `${Math.round(x10.tokenCount / 1000)}K tokens` : `${x10.tokenCount} tokens`
        - const date = new Date(x10.updated_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
        - const firstVideo = x10.videos[0]
        - const thumbnailUrl = firstVideo ? `https://img.youtube.com/vi/${firstVideo.youtube_id}/mqdefault.jpg` : null

        .bg-white.border.border-gray-200.rounded-lg.overflow-hidden.hover_border-gray-300.transition-colors
          .flex.gap-4.p-4
            //- Thumbnail (first video)
            if thumbnailUrl
              a.flex-shrink-0.block(href=`/s/${x10.id}`)
                img.w-36.h-20.object-cover.rounded-md(src=thumbnailUrl alt=x10.title || 'Untitled')

            .flex-1.min-w-0
              //- Header row
              .flex.justify-between.items-start.gap-2.mb-2
                div.min-w-0
                  a.block(href=`/s/${x10.id}`)
                    h3.font-semibold.text-gray-900.hover_text-red-600.transition-colors.truncate= x10.title || 'Untitled'
                  p.text-sm.text-gray-500.mt-1
                    | #{x10.videos.length} video#{x10.videos.length > 1 ? 's' : ''}
                    span.mx-1 Â·
                    | #{tokenDisplay}
                span.text-xs.text-gray-400.flex-shrink-0= date

              //- Actions row
              .flex.items-center.gap-3.text-sm
                a.text-blue-600.hover_text-blue-800(href=`/s/${x10.id}`) Open
                a.text-blue-600.hover_text-blue-800(href=`https://claude.ai/new` target="_blank") Claude
                a.text-blue-600.hover_text-blue-800(href=`https://chat.openai.com` target="_blank") ChatGPT
                button.text-blue-600.hover_text-blue-800(
                  type="button"
                  onclick=`navigator.clipboard.writeText(window.location.origin + '/s/${x10.id}'); this.textContent='Copied!'; setTimeout(() => this.textContent='Copy link', 1500)`
                ) Copy link
                form.inline(action=`/api/x10/${x10.id}` method="POST" style="display:inline")
                  input(type="hidden" name="_method" value="DELETE")
                  button.text-gray-400.hover_text-red-600(type="submit" onclick="return confirm('Delete this x10?')") Delete

  else
    .text-center.py-16
      p.text-gray-500.mb-6 You don't have any x10s yet
      a.bg-red-600.hover_bg-red-700.text-white.px-6.py-3.rounded-md.text-sm.font-medium.no-underline(href="/")
        | Create my first x10

      p.mt-8.text-gray-500 or

      p.mt-4.text-sm.text-gray-600
        | Install the Chrome extension
        br
        | Add videos in one click from YouTube
