doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title
    link(href="/styles.css" rel="stylesheet")
    script.
      (function() {
        var saved = localStorage.getItem('theme');
        var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (saved === 'dark' || (!saved && prefersDark)) {
          document.documentElement.classList.add('dark');
        }
      })();
  body.bg-surface-alt.text-text-primary.min-h-screen.flex.flex-col.antialiased
    header.bg-surface.border-b.border-border-default
      .max-w-2xl.mx-auto.w-full.px-4.py-4.flex.justify-between.items-center
        a.text-xl.font-bold.no-underline.tracking-tight(href="/")
          span.text-text-primary X10
          span.text-red-600 Tube
        nav.flex.items-center.gap-4
          a.text-sm.text-text-secondary.hover_text-text-primary.transition-colors(href="/myx10s") My x10s
          button#theme-toggle.p-2.rounded-md.hover_bg-surface-hover.text-text-secondary.hover_text-text-primary.transition-colors(type="button" title="Toggle dark mode")
            //- Sun icon (visible in dark mode)
            svg.w-5.h-5.hidden.dark_block(fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z")
            //- Moon icon (visible in light mode)
            svg.w-5.h-5.block.dark_hidden(fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z")

    main.max-w-2xl.mx-auto.w-full.px-4.py-10.flex-1
      block content

    footer.bg-surface.border-t.border-border-default
      .max-w-2xl.mx-auto.w-full.px-4.py-6.text-sm.text-text-muted
        span X10Tube

    script.
      document.getElementById('theme-toggle').addEventListener('click', function() {
        var html = document.documentElement;
        var isDark = html.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        if (!localStorage.getItem('theme')) {
          document.documentElement.classList.toggle('dark', e.matches);
        }
      });
