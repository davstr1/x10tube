doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title
    link(rel="icon" href="/favicon.ico" sizes="48x48")
    link(rel="icon" href="/favicon.svg" type="image/svg+xml")
    link(rel="apple-touch-icon" href="/apple-touch-icon.png")
    link(href="/styles.css" rel="stylesheet")
    style.
      .nav-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        color: var(--color-text-secondary);
        border-radius: 6px;
        position: relative;
        transition: color 0.15s, background 0.15s;
      }
      .nav-icon:hover {
        color: var(--color-text-primary);
        background: var(--color-surface-alt);
      }
      .nav-icon[data-tooltip]:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        margin-top: 8px;
        padding: 6px 10px;
        background: var(--color-surface);
        border: 1px solid var(--color-border-strong);
        border-radius: 6px;
        font-size: 12px;
        color: var(--color-text-primary);
        white-space: nowrap;
        z-index: 1000;
        pointer-events: none;
      }
    script.
      document.documentElement.classList.add('dark');
  body.bg-surface-alt.text-text-primary.min-h-screen.flex.flex-col.antialiased
    header.bg-surface.border-b.border-border-default
      .max-w-2xl.mx-auto.w-full.px-4.py-4.flex.justify-between.items-center
        a.text-xl.font-bold.no-underline.tracking-tight.flex.items-center.gap-2(href="/")
          svg.w-6.h-6(viewBox="0 0 100 100")
            path(d="M35 50 L72 29 A37 37 0 1 0 72 71 Z" fill="#dc2626")
            circle(cx="65" cy="50" r="6" fill="#ffffff")
            circle(cx="82" cy="50" r="6" fill="#ffffff")
          span
            span.text-text-primary StraightToYour
            span.text-red-600 AI
        a.no-underline.flex.items-center.gap-2.text-sm.text-text-secondary.hover_text-text-primary.transition-colors(href="/collections")
          svg(viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;")
            polygon(points="12 2 2 7 12 12 22 7 12 2")
            polyline(points="2 17 12 22 22 17")
            polyline(points="2 12 12 17 22 12")
          span My collections
        nav.flex.items-center.gap-2
          a.nav-icon(href="/settings" data-tooltip="Settings")
            svg(viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;")
              circle(cx="12" cy="12" r="3")
              path(d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z")
          a.nav-icon(href="/welcome" data-tooltip="Help")
            svg(viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;")
              circle(cx="12" cy="12" r="10")
              path(d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3")
              line(x1="12" y1="17" x2="12.01" y2="17")
          a.nav-icon(href="/sync" data-tooltip="Sync")
            svg(viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;")
              polyline(points="23 4 23 10 17 10")
              polyline(points="1 20 1 14 7 14")
              path(d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15")

    main.max-w-2xl.mx-auto.w-full.px-4.py-10.flex-1
      block content

    footer.bg-surface.border-t.border-border-default
      .max-w-2xl.mx-auto.w-full.px-4.py-6.text-sm.text-text-muted.flex.justify-between.items-center
        a.no-underline.flex.items-center.gap-2(href="/")
          svg(viewBox="0 0 100 100" style="width: 18px; height: 18px;")
            path(d="M35 50 L72 29 A37 37 0 1 0 72 71 Z" fill="#dc2626")
            circle(cx="65" cy="50" r="6" fill="#ffffff")
            circle(cx="82" cy="50" r="6" fill="#ffffff")
          span
            span.text-text-muted StraightToYour
            span.text-red-600 AI
        .flex.items-center.gap-4
          a.no-underline.text-text-muted.hover_text-text-secondary.transition-colors(href="/privacy") Privacy
          a.no-underline.text-text-muted.hover_text-text-secondary.transition-colors.flex.items-center.gap-1(href="mailto:tomyai@plstry.me" target="_blank")
            svg(width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round")
              rect(x="2" y="4" width="20" height="16" rx="2")
              path(d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7")
            | Contact

    if posthogApiKey
      script.
        (function() {
          var PH_KEY = '#{posthogApiKey}';
          var PH_URL = 'https://app.posthog.com/capture/';
          var vid = localStorage.getItem('stya_visitor_id');
          if (!vid) { vid = crypto.randomUUID(); localStorage.setItem('stya_visitor_id', vid); }
          fetch(PH_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              api_key: PH_KEY,
              event: 'page_view',
              distinct_id: vid,
              properties: { path: location.pathname }
            })
          }).catch(function() {});
        })();

